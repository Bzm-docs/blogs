(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{592:function(s,t,a){s.exports=a.p+"assets/img/Mybatis工作流程.365ac1d3.png"},763:function(s,t,a){"use strict";a.r(t);var e=a(6),_=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"作用域-scope-和生命周期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#作用域-scope-和生命周期"}},[s._v("#")]),s._v(" 作用域（Scope）和生命周期")]),s._v(" "),e("p",[s._v("不同作用域和生命周期类别是至关重要的，因为错误的使用会导致非常严重的并发问题。")]),s._v(" "),e("h2",{attrs:{id:"_1-mybatis-工作流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-mybatis-工作流程"}},[s._v("#")]),s._v(" 1. Mybatis 工作流程")]),s._v(" "),e("p",[e("img",{attrs:{src:a(592),alt:"Mybatis工作流程"}})]),s._v(" "),e("h3",{attrs:{id:"_1-1-sqlsessionfactorybuilder"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-sqlsessionfactorybuilder"}},[s._v("#")]),s._v(" 1.1. SqlSessionFactoryBuilder")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("这个类可以被实例化、使用和丢弃，一旦创建了 "),e("code",[s._v("SqlSessionFactory")]),s._v("，就不再需要它了。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("SqlSessionFactoryBuilder")]),s._v("实例的最佳作用域是方法作用域（也就是局部方法变量）。")])])]),s._v(" "),e("h3",{attrs:{id:"_1-2-sqlsessionfactory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-sqlsessionfactory"}},[s._v("#")]),s._v(" 1.2. SqlSessionFactory")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("SqlSessionFactory")]),s._v("一旦被创建就应该在应用的运行期间一直存在。")]),s._v(" "),e("li",[s._v("使用 "),e("code",[s._v("SqlSessionFactory")]),s._v("的最佳实践是在应用运行期间不要重复创建多次。")]),s._v(" "),e("li",[s._v("最佳作用域是应用作用域，最简单的就是使用单例模式或者静态单例模式。")])]),s._v(" "),e("h3",{attrs:{id:"_1-3-sqlsession"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-sqlsession"}},[s._v("#")]),s._v(" 1.3. SqlSession")]),s._v(" "),e("ul",[e("li",[s._v("每个线程都应该有它自己的 "),e("code",[s._v("SqlSession")]),s._v("实例。")]),s._v(" "),e("li",[s._v("它的最佳的作用域是请求或方法作用域。")]),s._v(" "),e("li",[s._v("打开一个 "),e("code",[s._v("SqlSession")]),s._v("，返回一个响应后，就关闭它。 这个关闭操作很重要。")]),s._v(" "),e("li",[s._v("这个关闭操作"),e("strong",[s._v("最好")]),s._v("放到 "),e("code",[s._v("finally")]),s._v("块中。")])])])}),[],!1,null,null,null);t.default=_.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx信号集 | Bzm 文档✍</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/qianzai/mydocs@master/custom/_media/favicon.ico">
    <meta name="description" content="记录一路走来学习的计算机知识，构建自己的知识体系！">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.8ea9151f.css" as="style"><link rel="preload" href="/assets/js/app.50041b6b.js" as="script"><link rel="preload" href="/assets/js/3.67e4e7c7.js" as="script"><link rel="preload" href="/assets/js/1.4b78180f.js" as="script"><link rel="preload" href="/assets/js/25.25e3231f.js" as="script"><link rel="preload" href="/assets/js/32.e67bc581.js" as="script"><link rel="prefetch" href="/assets/js/10.3d7e14e8.js"><link rel="prefetch" href="/assets/js/100.6067fcdb.js"><link rel="prefetch" href="/assets/js/101.3208727a.js"><link rel="prefetch" href="/assets/js/102.059125ef.js"><link rel="prefetch" href="/assets/js/103.5b3050c9.js"><link rel="prefetch" href="/assets/js/104.83449a53.js"><link rel="prefetch" href="/assets/js/105.35a4332d.js"><link rel="prefetch" href="/assets/js/106.830e8d65.js"><link rel="prefetch" href="/assets/js/107.7f2426e6.js"><link rel="prefetch" href="/assets/js/108.aabc04fe.js"><link rel="prefetch" href="/assets/js/109.3cc10333.js"><link rel="prefetch" href="/assets/js/11.c70ee217.js"><link rel="prefetch" href="/assets/js/110.0c05ea58.js"><link rel="prefetch" href="/assets/js/111.683e87a3.js"><link rel="prefetch" href="/assets/js/112.fe63e0be.js"><link rel="prefetch" href="/assets/js/113.bbe37571.js"><link rel="prefetch" href="/assets/js/114.7e76cacf.js"><link rel="prefetch" href="/assets/js/115.0a4512a7.js"><link rel="prefetch" href="/assets/js/116.fa23892a.js"><link rel="prefetch" href="/assets/js/117.c1b38dbc.js"><link rel="prefetch" href="/assets/js/118.5a97d59c.js"><link rel="prefetch" href="/assets/js/119.61bb550a.js"><link rel="prefetch" href="/assets/js/12.7d15bd7b.js"><link rel="prefetch" href="/assets/js/120.b32d6891.js"><link rel="prefetch" href="/assets/js/121.6b4129e3.js"><link rel="prefetch" href="/assets/js/122.6d8a4717.js"><link rel="prefetch" href="/assets/js/123.b9955c7e.js"><link rel="prefetch" href="/assets/js/124.578d76ea.js"><link rel="prefetch" href="/assets/js/125.cb24bcdc.js"><link rel="prefetch" href="/assets/js/126.c4972d34.js"><link rel="prefetch" href="/assets/js/127.fdb781d0.js"><link rel="prefetch" href="/assets/js/128.648b566b.js"><link rel="prefetch" href="/assets/js/129.c51277fa.js"><link rel="prefetch" href="/assets/js/13.f437198f.js"><link rel="prefetch" href="/assets/js/130.aabde2ca.js"><link rel="prefetch" href="/assets/js/131.693d96fb.js"><link rel="prefetch" href="/assets/js/132.20bc3774.js"><link rel="prefetch" href="/assets/js/133.36b95147.js"><link rel="prefetch" href="/assets/js/134.63fc322a.js"><link rel="prefetch" href="/assets/js/135.af647793.js"><link rel="prefetch" href="/assets/js/136.eaff6734.js"><link rel="prefetch" href="/assets/js/137.3595858c.js"><link rel="prefetch" href="/assets/js/14.aacc1bef.js"><link rel="prefetch" href="/assets/js/15.6ed84122.js"><link rel="prefetch" href="/assets/js/16.272f9fd4.js"><link rel="prefetch" href="/assets/js/17.c8741e7e.js"><link rel="prefetch" href="/assets/js/18.0db39702.js"><link rel="prefetch" href="/assets/js/19.9917f57f.js"><link rel="prefetch" href="/assets/js/20.b51db17b.js"><link rel="prefetch" href="/assets/js/21.36937019.js"><link rel="prefetch" href="/assets/js/22.9f21d273.js"><link rel="prefetch" href="/assets/js/23.d17b548b.js"><link rel="prefetch" href="/assets/js/24.52925684.js"><link rel="prefetch" href="/assets/js/26.7722d10c.js"><link rel="prefetch" href="/assets/js/27.a2270927.js"><link rel="prefetch" href="/assets/js/28.0f015a53.js"><link rel="prefetch" href="/assets/js/29.a7aa088c.js"><link rel="prefetch" href="/assets/js/30.d06842e3.js"><link rel="prefetch" href="/assets/js/31.735fb736.js"><link rel="prefetch" href="/assets/js/33.dde61bce.js"><link rel="prefetch" href="/assets/js/34.81e8a827.js"><link rel="prefetch" href="/assets/js/35.21929737.js"><link rel="prefetch" href="/assets/js/36.cff6f01e.js"><link rel="prefetch" href="/assets/js/37.0011c30f.js"><link rel="prefetch" href="/assets/js/38.b597ef38.js"><link rel="prefetch" href="/assets/js/39.4654ec92.js"><link rel="prefetch" href="/assets/js/4.21bce330.js"><link rel="prefetch" href="/assets/js/40.794ceedd.js"><link rel="prefetch" href="/assets/js/41.a5d125d4.js"><link rel="prefetch" href="/assets/js/42.4e4120fd.js"><link rel="prefetch" href="/assets/js/43.1b442355.js"><link rel="prefetch" href="/assets/js/44.5c621338.js"><link rel="prefetch" href="/assets/js/45.a255b905.js"><link rel="prefetch" href="/assets/js/46.75b8d63e.js"><link rel="prefetch" href="/assets/js/47.e96567f5.js"><link rel="prefetch" href="/assets/js/48.cb7fdabb.js"><link rel="prefetch" href="/assets/js/49.14acc194.js"><link rel="prefetch" href="/assets/js/5.9a1d0f7d.js"><link rel="prefetch" href="/assets/js/50.a6b1de04.js"><link rel="prefetch" href="/assets/js/51.137e16a0.js"><link rel="prefetch" href="/assets/js/52.7c9541cf.js"><link rel="prefetch" href="/assets/js/53.bfab9f8e.js"><link rel="prefetch" href="/assets/js/54.2506e7a0.js"><link rel="prefetch" href="/assets/js/55.c2bc2cbf.js"><link rel="prefetch" href="/assets/js/56.2c8b26f5.js"><link rel="prefetch" href="/assets/js/57.4de87136.js"><link rel="prefetch" href="/assets/js/58.10bb30d4.js"><link rel="prefetch" href="/assets/js/59.445118aa.js"><link rel="prefetch" href="/assets/js/6.34c6ebf3.js"><link rel="prefetch" href="/assets/js/60.e92ac748.js"><link rel="prefetch" href="/assets/js/61.aff65467.js"><link rel="prefetch" href="/assets/js/62.3cd1e065.js"><link rel="prefetch" href="/assets/js/63.5c2e6ae1.js"><link rel="prefetch" href="/assets/js/64.3a46788b.js"><link rel="prefetch" href="/assets/js/65.49f4b07f.js"><link rel="prefetch" href="/assets/js/66.7609640b.js"><link rel="prefetch" href="/assets/js/67.5e32eeb5.js"><link rel="prefetch" href="/assets/js/68.6fdae9ea.js"><link rel="prefetch" href="/assets/js/69.fe9419c9.js"><link rel="prefetch" href="/assets/js/7.d41d4e27.js"><link rel="prefetch" href="/assets/js/70.ca80643e.js"><link rel="prefetch" href="/assets/js/71.9420a66a.js"><link rel="prefetch" href="/assets/js/72.de9e15aa.js"><link rel="prefetch" href="/assets/js/73.d2dcc572.js"><link rel="prefetch" href="/assets/js/74.03c38c70.js"><link rel="prefetch" href="/assets/js/75.79ee6e35.js"><link rel="prefetch" href="/assets/js/76.0339fd29.js"><link rel="prefetch" href="/assets/js/77.93497135.js"><link rel="prefetch" href="/assets/js/78.030f143c.js"><link rel="prefetch" href="/assets/js/79.631170b1.js"><link rel="prefetch" href="/assets/js/8.6783294f.js"><link rel="prefetch" href="/assets/js/80.8e6854d5.js"><link rel="prefetch" href="/assets/js/81.33e2dc0d.js"><link rel="prefetch" href="/assets/js/82.fc6d71c5.js"><link rel="prefetch" href="/assets/js/83.6e7167fd.js"><link rel="prefetch" href="/assets/js/84.dd940260.js"><link rel="prefetch" href="/assets/js/85.07ff4182.js"><link rel="prefetch" href="/assets/js/86.77a844df.js"><link rel="prefetch" href="/assets/js/87.2cf62316.js"><link rel="prefetch" href="/assets/js/88.01ed0e97.js"><link rel="prefetch" href="/assets/js/89.0104f798.js"><link rel="prefetch" href="/assets/js/9.be60b877.js"><link rel="prefetch" href="/assets/js/90.4145b02a.js"><link rel="prefetch" href="/assets/js/91.61114c77.js"><link rel="prefetch" href="/assets/js/92.7a353fd5.js"><link rel="prefetch" href="/assets/js/93.9de9c295.js"><link rel="prefetch" href="/assets/js/94.c8ebfddd.js"><link rel="prefetch" href="/assets/js/95.45ee80db.js"><link rel="prefetch" href="/assets/js/96.2020619a.js"><link rel="prefetch" href="/assets/js/97.9c497fcb.js"><link rel="prefetch" href="/assets/js/98.5feee35c.js"><link rel="prefetch" href="/assets/js/99.61a68018.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ea9151f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Bzm 文档✍</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>记录一路走来学习的计算机知识，构建自己的知识体系！</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Bzm</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Bzm 文档✍" class="logo"> <span class="site-name">Bzm 文档✍</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/其他/" class="nav-link"><i class="undefined"></i>
  其他
</a></li><li class="dropdown-item"><!----> <a href="/categories/云计算/" class="nav-link"><i class="undefined"></i>
  云计算
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/生活/" class="nav-link"><i class="undefined"></i>
  生活
</a></li><li class="dropdown-item"><!----> <a href="/categories/系统/" class="nav-link"><i class="undefined"></i>
  系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/运维/" class="nav-link"><i class="undefined"></i>
  运维
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/qianzai" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="https://cdn.jsdelivr.net/gh/qianzai/mydocs@master/custom/_media/%E5%A4%B4%E5%83%8F.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    Bzm
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>120</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>28</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/其他/" class="nav-link"><i class="undefined"></i>
  其他
</a></li><li class="dropdown-item"><!----> <a href="/categories/云计算/" class="nav-link"><i class="undefined"></i>
  云计算
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/生活/" class="nav-link"><i class="undefined"></i>
  生活
</a></li><li class="dropdown-item"><!----> <a href="/categories/系统/" class="nav-link"><i class="undefined"></i>
  系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/运维/" class="nav-link"><i class="undefined"></i>
  运维
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/qianzai" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Nginx</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/yun-wei/nginx/" aria-current="page" class="sidebar-link">引言</a></li><li><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html" aria-current="page" class="active sidebar-link">Nginx信号集</a></li><li><a href="/docs/yun-wei/nginx/nginxru-men.html" class="sidebar-link">Nginx入门</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Bzm</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Nginx信号集</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>Bzm</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>4/1/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Nginx</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="nginx信号集"><a href="#nginx信号集" class="header-anchor">#</a> Nginx信号集</h1> <p>在之前Nginx中，简单介绍了Nginx的常用操作</p> <p>我们有两种方式来向 master 进程发送信号：</p> <ul><li><p>通过 <code>kill</code>命令手动发送。</p></li> <li><p>通过 <code>nginx -s signal</code> 来操作</p></li></ul> <h2 id="通过kill命令"><a href="#通过kill命令" class="header-anchor">#</a> 通过kill命令</h2> <p>原理是，产生一个新进程，该进程通过 <code>nginx.pid</code> 文件得到 master 进程的 pid，然后把对应的信号发送到 master，之后退出，这种进程被称为 signaller。</p> <h2 id="通过-nginx-s-signal"><a href="#通过-nginx-s-signal" class="header-anchor">#</a> 通过 nginx -s signal</h2> <p>了解 <code>nginx -s signal</code> 到真实信号的映射</p> <table><thead><tr><th>operation</th> <th>signal</th></tr></thead> <tbody><tr><td>reload</td> <td>SIGHUP</td></tr> <tr><td>reopen</td> <td>SIGUSR1</td></tr> <tr><td>stop</td> <td>SIGTERM</td></tr> <tr><td>quit</td> <td>SIGQUIT</td></tr> <tr><td>hot update</td> <td>SIGUSR2 &amp; SIGWINCH &amp; SIGQUIT</td></tr></tbody></table> <h3 id="stop-vs-quit"><a href="#stop-vs-quit" class="header-anchor">#</a> stop vs quit</h3> <p>stop 发送 SIGTERM 信号，表示要求强制退出，quit 发送 <code>SIGQUIT</code>，表示优雅地退出。具体区别在于，worker 进程在收到 <code>SIGQUIT</code> 消息（注意不是直接发送信号，所以这里用消息替代）后，会关闭监听的套接字，关闭当前空闲的连接（可以被抢占的连接），然后提前处理所有的定时器事件，最后退出。没有特殊情况，都应该使用 quit 而不是 stop。</p> <h3 id="reload"><a href="#reload" class="header-anchor">#</a> reload</h3> <p>master 进程收到 <code>SIGHUP</code> 后，会重新进行配置文件解析、共享内存申请，等一系列其他的工作，然后产生一批新的 worker 进程，最后向旧的 worker 进程发送 <code>SIGQUIT</code> 对应的消息，最终无缝实现了重启操作。</p> <h3 id="reopen"><a href="#reopen" class="header-anchor">#</a> reopen</h3> <p>master 进程收到 <code>SIGUSR1</code> 后，会重新打开所有已经打开的文件（比如日志），然后向每个 worker 进程发送 <code>SIGUSR1</code> 信息，worker 进程收到信号后，会执行同样的操作。reopen 可用于日志切割。</p> <p><strong>NGINX 官方就提供了一个方案</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">mv</span> access.log access.log.0
$ <span class="token function">kill</span> -USR1 <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> master.nginx.pid<span class="token variable">`</span></span> <span class="token comment"># 重新打开日志文件</span>
$ <span class="token function">sleep</span> <span class="token number">1</span>
$ <span class="token function">gzip</span> access.log.0    <span class="token comment"># do something with access.log.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>这里 <code>sleep 1</code> 是必须的，因为在 master 进程向 worker 进程发送 <code>SIGUSR1</code> 消息到 worker 进程真正重新打开 <code>access.log</code> 之间，有一段时间窗口，此时 worker 进程还是向文件 <code>access.log.0</code> 里写入日志的。通过 sleep 1s，保证了 <code>access.log.0</code> 日志信息的完整性（如果没有 sleep 而直接进行压缩，很有可能出现日志丢失的情况）。</p></blockquote> <h3 id="hot-update"><a href="#hot-update" class="header-anchor">#</a> hot update</h3> <ul><li><p>首先需要给当前的 master 进程发送 <code>SIGUSR2</code>，之后 master 会重命名 <code>nginx.pid</code> 到 <code>nginx.pid.oldbin</code>，然后 fork 一个新的进程，新进程会通过 <code>execve</code> 这个系统调用，使用新的 nginx ELF 文件替换当前的进程映像，成为新的 master 进程。新 master 进程起来之后，就会进行配置文件解析等操作，然后 fork 出新的 worker 进程开始工作。</p></li> <li><p>接着我们向旧的 master 发送 <code>SIGWINCH</code> 信号，然后旧的 master 进程则会向它的 worker 进程发送 <code>SIGQUIT</code> 信息，从而使得 worker 进程退出。向 master 进程发送 <code>SIGWINCH</code> 和 <code>SIGQUIT</code> 都会使得 worker 进程退出，但是前者不会使得 master 进程也退出。</p></li> <li><p>最后，如果我们觉得旧的 master 进程使命完成，就可以向它发送 <code>SIGQUIT</code> 信号，让其退出了。</p></li></ul> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题：</h2> <h3 id="nginx热更新"><a href="#nginx热更新" class="header-anchor">#</a> Nginx热更新</h3> <p>首先启动Nginx</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> auxf <span class="token operator">|</span> <span class="token function">grep</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="image-20210201105059065"></p> <blockquote><p>可以看到 master 和 worker 都已经在运行。</p></blockquote> <p>接着我们向 master 发送一个 <code>SIGUSR2</code> 信号，当 nginx 核心收到这个信号后，就会触发热更新。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">kill</span> -USR2 <span class="token number">2418</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="image-20210201105148802"></p> <p>可以看到新的 master 和该 master fork 出来的 worker 已经在运行了，此时我们接着向旧 master 发送一个 <code>SIGWINCH</code> 信号，旧 master 收到这个信号后，会向它的 worker 发送 <code>SIGQUIT</code>，于是旧 master 的 worker 进程就会退出：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">kill</span> -WINCH <span class="token number">2418</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="image-20210201105223765"></p> <blockquote><p>此时只剩下旧的 master，新的 master 和新 master 的 worker 在运行</p></blockquote> <p>接着使用 stop 命令</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./nginx -s stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="image-20210201105245953"></p> <blockquote><p>会发现，新的 master 和它的 worker 都已经退出，而旧的 master 还在运行，并产生了 worker 出来！！！</p></blockquote></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/11/2022, 9:01:18 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/docs/yun-wei/nginx/" class="prev router-link-active">
            引言
          </a></span> <span class="next"><a href="/docs/yun-wei/nginx/nginxru-men.html">
            Nginx入门
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html#通过kill命令" class="sidebar-link reco-side-通过kill命令" data-v-70334359>通过kill命令</a></li><li class="level-2" data-v-70334359><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html#通过-nginx-s-signal" class="sidebar-link reco-side-通过-nginx-s-signal" data-v-70334359>通过 nginx -s signal</a></li><li class="level-3" data-v-70334359><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html#stop-vs-quit" class="sidebar-link reco-side-stop-vs-quit" data-v-70334359>stop vs quit</a></li><li class="level-3" data-v-70334359><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html#reload" class="sidebar-link reco-side-reload" data-v-70334359>reload</a></li><li class="level-3" data-v-70334359><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html#reopen" class="sidebar-link reco-side-reopen" data-v-70334359>reopen</a></li><li class="level-3" data-v-70334359><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html#hot-update" class="sidebar-link reco-side-hot-update" data-v-70334359>hot update</a></li><li class="level-2" data-v-70334359><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html#问题" class="sidebar-link reco-side-问题" data-v-70334359>问题：</a></li><li class="level-3" data-v-70334359><a href="/docs/yun-wei/nginx/nginxxin-hao-ji.html#nginx热更新" class="sidebar-link reco-side-nginx热更新" data-v-70334359>Nginx热更新</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 Bzm 文档✍
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:50px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div></div></div>
    <script src="/assets/js/app.50041b6b.js" defer></script><script src="/assets/js/3.67e4e7c7.js" defer></script><script src="/assets/js/1.4b78180f.js" defer></script><script src="/assets/js/25.25e3231f.js" defer></script><script src="/assets/js/32.e67bc581.js" defer></script>
  </body>
</html>
